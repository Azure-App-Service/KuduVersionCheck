@model KuduVersionCheck.Models.StampEntriesViewModel

@functions {
    string GetColumnDisplayName(string columnName)
    {
        switch (columnName) {
            case "MobileServicesDotNet":
                return "Mobile.Net";
            case "MobileServicesNode":
                return "MobileNode";
            default:
                return columnName;
        }
    }
}

<!DOCTYPE html>

<html>
<head>
    <title>MAWS Status</title>
    <link rel="stylesheet" type="text/css" href="Content/css/style.css" media="screen" />
</head>
<body>
    @foreach (var group in Model.Groups)
    {
    <div>
        <h2>@group.Key</h2>
        <table id="box-table-a">
            <tr>
                <th>Stamp</th>
                @if (Model.ShowConsole) { <th>Kudu</th> }
                @foreach (var column in Model.Columns)
                {
                    <th>@GetColumnDisplayName(column)</th>
                }
                <th>Time</th>
            </tr>
            @foreach (var entry in group.OrderBy(e => e.Name))
            {
                <tr>
                    <td style="@entry.Style"><a style="@entry.Style" href="@entry.TestSiteUrl" target="_blank">@entry.Name</a> @if (entry.Mismatch) { <b>*</b> }</td>
                    @if (Model.ShowConsole) { <td style="@entry.Style"><a style="@entry.Style" href="@entry.ConsoleUrl" target="_blank">run</a></td> }
                    @foreach (var column in Model.Columns)
                    {
                        string val = "";
                        entry.Data.TryGetValue(column, out val);
                        <td style="@entry.Style">@val</td>
                    }
                    <td style="@entry.Style">@((int)entry.Duration.TotalMilliseconds)</td>
                </tr>
            }
        </table>
    </div>
    }
</body>
</html>
